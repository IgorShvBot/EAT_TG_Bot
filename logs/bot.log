04-05-2025 10:42:57 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 10:42:57 - telegram.ext.Application - INFO - Application started
04-05-2025 10:43:29 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 10:43:29 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 10:43:29 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 10:43:29 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 10:43:29 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 10:43:29 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: SQL('\n            SELECT \n                id, transaction_date, amount, cash_source,\n                category, description, counterparty,\n                check_num, transaction_type,\n                transaction_class, target_amount, target_cash_source\n            FROM transactions \n            WHERE user_id = %s AND transaction_date BETWEEN %s AND %s\n            ') —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-04-04', '2025-05-04']
04-05-2025 10:43:29 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 10 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 10:43:29 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['ID', '–î–∞—Ç–∞', '–°—É–º–º–∞', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å', '–ö–∞—Ç–µ–≥–æ—Ä–∏—è', '–û–ø–∏—Å–∞–Ω–∏–µ', '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç', '–ß–µ–∫ #', '–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏', '–ö–ª–∞—Å—Å', '–°—É–º–º–∞ (–∫—É–¥–∞)', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å (–∫—É–¥–∞)']
04-05-2025 10:43:29 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 14:27:08 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 14:27:08 - telegram.ext.Application - INFO - Application started
04-05-2025 14:33:14 - root - INFO - –ü–æ–ª—É—á–µ–Ω callback: set_category
04-05-2025 14:33:31 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_type –≤—ã–∑–≤–∞–Ω
04-05-2025 14:33:37 - root - ERROR - –û—à–∏–±–∫–∞: Timed out, update: Update(callback_query=CallbackQuery(chat_instance='7314396038372118458', data='set_type', from_user=User(first_name='Igor', id=198451926, is_bot=False, language_code='ru', last_name='Shvyrkin', username='INShvyrkin'), id='852344535648460935', message=Message(channel_chat_created=False, chat=Chat(first_name='Igor', id=198451926, last_name='Shvyrkin', type=<ChatType.PRIVATE>, username='INShvyrkin'), date=datetime.datetime(2025, 5, 4, 11, 33, 12, tzinfo=<UTC>), delete_chat_photo=False, from_user=User(first_name='INS –ê–Ω–∞–ª–∏–∑ –≤—ã–ø–∏—Å–æ–∫ PDF', id=7444624327, is_bot=True, username='INS_ExtrClassTrans_bot'), group_chat_created=False, message_id=1098, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='set_start_date', text='üìÖ –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞: 2025-04-04'),), (InlineKeyboardButton(callback_data='set_end_date', text='üìÖ –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: 2025-05-04'),), (InlineKeyboardButton(callback_data='set_category', text='üè∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –í—Å–µ'),), (InlineKeyboardButton(callback_data='set_type', text='üîÄ –¢–∏–ø: –í—Å–µ'),), (InlineKeyboardButton(callback_data='set_cash_source', text='üí≥ –ù–∞–ª–∏—á–Ω–æ—Å—Ç—å: –í—Å–µ'),), (InlineKeyboardButton(callback_data='set_counterparty', text='üë• –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç: –í—Å–µ'),), (InlineKeyboardButton(callback_data='set_check_num', text='üßæ –ß–µ–∫: –í—Å–µ'),), (InlineKeyboardButton(callback_data='set_class', text='üìä –ö–ª–∞—Å—Å: –í—Å–µ'),), (InlineKeyboardButton(callback_data='generate_report', text='‚úÖ –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç'),), (InlineKeyboardButton(callback_data='cancel_export', text='‚ùå –û—Ç–º–µ–Ω–∞'),))), supergroup_chat_created=False, text='‚öô –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç—á–µ—Ç–∞:')), update_id=341836976)
Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 155, in _call_sslobject_method
    result = func(*args)
  File "/usr/local/lib/python3.10/ssl.py", line 975, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLWantReadError: The operation did not complete (read) (_ssl.c:1017)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/anyio/_core/_tasks.py", line 115, in fail_after
    yield cancel_scope
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 69, in start_tls
    ssl_stream = await anyio.streams.tls.TLSStream.wrap(
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 147, in wrap
    await wrapper._call_sslobject_method(ssl_object.do_handshake)
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 162, in _call_sslobject_method
    data = await self.transport_stream.receive()
  File "/root/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1254, in receive
    await self._protocol.read_event.wait()
  File "/usr/local/lib/python3.10/asyncio/locks.py", line 214, in wait
    await fut
asyncio.exceptions.CancelledError: Cancelled by cancel scope ffff85d2d510

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
    yield
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 78, in start_tls
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 68, in start_tls
    with anyio.fail_after(timeout):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/anyio/_core/_tasks.py", line 118, in fail_after
    raise TimeoutError
TimeoutError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
    yield
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 262, in handle_async_request
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 245, in handle_async_request
    response = await connection.handle_async_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 92, in handle_async_request
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 69, in handle_async_request
    stream = await self._connect(request)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 149, in _connect
    stream = await stream.start_tls(**kwargs)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 66, in start_tls
    with map_exceptions(exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 216, in do_request
    res = await self._client.request(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1530, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1617, in send
    response = await self._send_handling_auth(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1719, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 352, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_application.py", line 1124, in process_update
    await coroutine
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_handler.py", line 141, in handle_update
    return await self.callback(update, context)
  File "/app/bot.py", line 102, in wrapper
    return await func(*args, **kwargs)
  File "/app/bot.py", line 406, in set_type
    await query.answer()
  File "/root/.local/lib/python3.10/site-packages/telegram/_callbackquery.py", line 180, in answer
    return await self.get_bot().answer_callback_query(
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_extbot.py", line 773, in answer_callback_query
    return await super().answer_callback_query(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 381, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 3306, in answer_callback_query
    return await self._post(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 469, in _post
    return await self._do_post(
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_extbot.py", line 325, in _do_post
    return await super()._do_post(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 497, in _do_post
    return await request.post(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 168, in post
    result = await self._request_wrapper(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 291, in _request_wrapper
    raise exc
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 277, in _request_wrapper
    code, payload = await self.do_request(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 233, in do_request
    raise TimedOut from err
telegram.error.TimedOut: Timed out
04-05-2025 14:33:37 - root - ERROR - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞:
Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 155, in _call_sslobject_method
    result = func(*args)
  File "/usr/local/lib/python3.10/ssl.py", line 975, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLWantReadError: The operation did not complete (read) (_ssl.c:1017)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/anyio/_core/_tasks.py", line 115, in fail_after
    yield cancel_scope
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 69, in start_tls
    ssl_stream = await anyio.streams.tls.TLSStream.wrap(
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 147, in wrap
    await wrapper._call_sslobject_method(ssl_object.do_handshake)
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 162, in _call_sslobject_method
    data = await self.transport_stream.receive()
  File "/root/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1254, in receive
    await self._protocol.read_event.wait()
  File "/usr/local/lib/python3.10/asyncio/locks.py", line 214, in wait
    await fut
asyncio.exceptions.CancelledError: Cancelled by cancel scope ffff85d2d510

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
    yield
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 78, in start_tls
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 68, in start_tls
    with anyio.fail_after(timeout):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/anyio/_core/_tasks.py", line 118, in fail_after
    raise TimeoutError
TimeoutError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
    yield
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 262, in handle_async_request
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 245, in handle_async_request
    response = await connection.handle_async_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 92, in handle_async_request
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 69, in handle_async_request
    stream = await self._connect(request)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 149, in _connect
    stream = await stream.start_tls(**kwargs)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 66, in start_tls
    with map_exceptions(exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 216, in do_request
    res = await self._client.request(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1530, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1617, in send
    response = await self._send_handling_auth(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1719, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 352, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_application.py", line 1124, in process_update
    await coroutine
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_handler.py", line 141, in handle_update
    return await self.callback(update, context)
  File "/app/bot.py", line 102, in wrapper
    return await func(*args, **kwargs)
  File "/app/bot.py", line 406, in set_type
    await query.answer()
  File "/root/.local/lib/python3.10/site-packages/telegram/_callbackquery.py", line 180, in answer
    return await self.get_bot().answer_callback_query(
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_extbot.py", line 773, in answer_callback_query
    return await super().answer_callback_query(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 381, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 3306, in answer_callback_query
    return await self._post(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 469, in _post
    return await self._do_post(
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_extbot.py", line 325, in _do_post
    return await super()._do_post(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 497, in _do_post
    return await request.post(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 168, in post
    result = await self._request_wrapper(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 291, in _request_wrapper
    raise exc
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 277, in _request_wrapper
    code, payload = await self.do_request(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 233, in do_request
    raise TimedOut from err
telegram.error.TimedOut: Timed out
04-05-2025 14:42:32 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 14:42:32 - telegram.ext.Application - INFO - Application started
04-05-2025 14:43:01 - root - ERROR - –û—à–∏–±–∫–∞: Timed out, update: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Igor', id=198451926, last_name='Shvyrkin', type=<ChatType.PRIVATE>, username='INShvyrkin'), date=datetime.datetime(2025, 5, 4, 11, 42, 56, tzinfo=<UTC>), delete_chat_photo=False, entities=(MessageEntity(length=7, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Igor', id=198451926, is_bot=False, language_code='ru', last_name='Shvyrkin', username='INShvyrkin'), group_chat_created=False, message_id=1101, supergroup_chat_created=False, text='/export'), update_id=341836978)
Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 155, in _call_sslobject_method
    result = func(*args)
  File "/usr/local/lib/python3.10/ssl.py", line 975, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLWantReadError: The operation did not complete (read) (_ssl.c:1017)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/anyio/_core/_tasks.py", line 115, in fail_after
    yield cancel_scope
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 69, in start_tls
    ssl_stream = await anyio.streams.tls.TLSStream.wrap(
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 147, in wrap
    await wrapper._call_sslobject_method(ssl_object.do_handshake)
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 162, in _call_sslobject_method
    data = await self.transport_stream.receive()
  File "/root/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1254, in receive
    await self._protocol.read_event.wait()
  File "/usr/local/lib/python3.10/asyncio/locks.py", line 214, in wait
    await fut
asyncio.exceptions.CancelledError: Cancelled by cancel scope ffff787ecd00

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
    yield
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 78, in start_tls
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 68, in start_tls
    with anyio.fail_after(timeout):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/anyio/_core/_tasks.py", line 118, in fail_after
    raise TimeoutError
TimeoutError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
    yield
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 262, in handle_async_request
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 245, in handle_async_request
    response = await connection.handle_async_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 92, in handle_async_request
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 69, in handle_async_request
    stream = await self._connect(request)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 149, in _connect
    stream = await stream.start_tls(**kwargs)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 66, in start_tls
    with map_exceptions(exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 216, in do_request
    res = await self._client.request(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1530, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1617, in send
    response = await self._send_handling_auth(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1719, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 352, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_application.py", line 1124, in process_update
    await coroutine
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_handler.py", line 141, in handle_update
    return await self.callback(update, context)
  File "/app/bot.py", line 102, in wrapper
    return await func(*args, **kwargs)
  File "/app/bot.py", line 349, in export_start
    await self.show_filters_menu(update, context)
  File "/app/bot.py", line 102, in wrapper
    return await func(*args, **kwargs)
  File "/app/bot.py", line 329, in show_filters_menu
    await update.message.reply_text(
  File "/root/.local/lib/python3.10/site-packages/telegram/_message.py", line 1074, in reply_text
    return await self.get_bot().send_message(
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_extbot.py", line 2633, in send_message
    return await super().send_message(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 381, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 807, in send_message
    return await self._send_message(
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_extbot.py", line 507, in _send_message
    result = await super()._send_message(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 559, in _send_message
    result = await self._post(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 469, in _post
    return await self._do_post(
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_extbot.py", line 325, in _do_post
    return await super()._do_post(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 497, in _do_post
    return await request.post(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 168, in post
    result = await self._request_wrapper(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 291, in _request_wrapper
    raise exc
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 277, in _request_wrapper
    code, payload = await self.do_request(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 233, in do_request
    raise TimedOut from err
telegram.error.TimedOut: Timed out
04-05-2025 14:43:01 - root - ERROR - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞:
Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 155, in _call_sslobject_method
    result = func(*args)
  File "/usr/local/lib/python3.10/ssl.py", line 975, in do_handshake
    self._sslobj.do_handshake()
ssl.SSLWantReadError: The operation did not complete (read) (_ssl.c:1017)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/anyio/_core/_tasks.py", line 115, in fail_after
    yield cancel_scope
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 69, in start_tls
    ssl_stream = await anyio.streams.tls.TLSStream.wrap(
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 147, in wrap
    await wrapper._call_sslobject_method(ssl_object.do_handshake)
  File "/root/.local/lib/python3.10/site-packages/anyio/streams/tls.py", line 162, in _call_sslobject_method
    data = await self.transport_stream.receive()
  File "/root/.local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1254, in receive
    await self._protocol.read_event.wait()
  File "/usr/local/lib/python3.10/asyncio/locks.py", line 214, in wait
    await fut
asyncio.exceptions.CancelledError: Cancelled by cancel scope ffff787ecd00

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
    yield
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 78, in start_tls
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 68, in start_tls
    with anyio.fail_after(timeout):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/anyio/_core/_tasks.py", line 118, in fail_after
    raise TimeoutError
TimeoutError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
    yield
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 262, in handle_async_request
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 245, in handle_async_request
    response = await connection.handle_async_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 92, in handle_async_request
    raise exc
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 69, in handle_async_request
    stream = await self._connect(request)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 149, in _connect
    stream = await stream.start_tls(**kwargs)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 66, in start_tls
    with map_exceptions(exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 216, in do_request
    res = await self._client.request(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1530, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1617, in send
    response = await self._send_handling_auth(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpx/_client.py", line 1719, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 352, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/.local/lib/python3.10/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_application.py", line 1124, in process_update
    await coroutine
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_handler.py", line 141, in handle_update
    return await self.callback(update, context)
  File "/app/bot.py", line 102, in wrapper
    return await func(*args, **kwargs)
  File "/app/bot.py", line 349, in export_start
    await self.show_filters_menu(update, context)
  File "/app/bot.py", line 102, in wrapper
    return await func(*args, **kwargs)
  File "/app/bot.py", line 329, in show_filters_menu
    await update.message.reply_text(
  File "/root/.local/lib/python3.10/site-packages/telegram/_message.py", line 1074, in reply_text
    return await self.get_bot().send_message(
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_extbot.py", line 2633, in send_message
    return await super().send_message(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 381, in decorator
    result = await func(self, *args, **kwargs)  # skipcq: PYL-E1102
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 807, in send_message
    return await self._send_message(
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_extbot.py", line 507, in _send_message
    result = await super()._send_message(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 559, in _send_message
    result = await self._post(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 469, in _post
    return await self._do_post(
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_extbot.py", line 325, in _do_post
    return await super()._do_post(
  File "/root/.local/lib/python3.10/site-packages/telegram/_bot.py", line 497, in _do_post
    return await request.post(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 168, in post
    result = await self._request_wrapper(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 291, in _request_wrapper
    raise exc
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 277, in _request_wrapper
    code, payload = await self.do_request(
  File "/root/.local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 233, in do_request
    raise TimedOut from err
telegram.error.TimedOut: Timed out
04-05-2025 14:45:56 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 14:45:56 - telegram.ext.Application - INFO - Application started
04-05-2025 14:48:27 - root - INFO - –ü–æ–ª—É—á–µ–Ω callback: set_category
04-05-2025 14:48:32 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_type –≤—ã–∑–≤–∞–Ω
04-05-2025 14:48:32 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 14:48:32 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 14:48:32 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 14:48:32 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 14:48:32 - database - INFO - –í—ã–∑–æ–≤ get_unique_values –¥–ª—è column=transaction_type, user_id=198451926
04-05-2025 14:48:32 - database - INFO - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è fetchall: True
04-05-2025 14:48:32 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT DISTINCT "transaction_type"
            FROM transactions
            WHERE user_id = %s AND "transaction_type" IS NOT NULL
            ORDER BY "transaction_type"
         —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º user_id=198451926
04-05-2025 14:48:32 - database - INFO - –ü–æ–ª—É—á–µ–Ω–æ 1 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ transaction_type
04-05-2025 14:48:32 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 14:48:39 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_cash_source –≤—ã–∑–≤–∞–Ω
04-05-2025 14:48:39 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 14:48:39 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 14:48:39 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 14:48:39 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 14:48:39 - database - INFO - –í—ã–∑–æ–≤ get_unique_values –¥–ª—è column=cash_source, user_id=198451926
04-05-2025 14:48:39 - database - INFO - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è fetchall: True
04-05-2025 14:48:39 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT DISTINCT "cash_source"
            FROM transactions
            WHERE user_id = %s AND "cash_source" IS NOT NULL
            ORDER BY "cash_source"
         —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º user_id=198451926
04-05-2025 14:48:39 - database - INFO - –ü–æ–ª—É—á–µ–Ω–æ 1 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ cash_source
04-05-2025 14:48:39 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 14:48:50 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_counterparty –≤—ã–∑–≤–∞–Ω
04-05-2025 14:49:04 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: –ù–∞—Ç–∞—à–∞, user_data: {'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_input': 'counterparty'}
04-05-2025 14:49:14 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_check_num –≤—ã–∑–≤–∞–Ω
04-05-2025 14:49:31 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: –ù–æ–º–µ—Ä, user_data: {'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–ù–∞—Ç–∞—à–∞', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_input': 'check_num'}
04-05-2025 14:49:35 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_class –≤—ã–∑–≤–∞–Ω
04-05-2025 14:49:35 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 14:49:35 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 14:49:35 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 14:49:35 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 14:49:35 - database - INFO - –í—ã–∑–æ–≤ get_unique_values –¥–ª—è column=transaction_class, user_id=198451926
04-05-2025 14:49:35 - database - INFO - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è fetchall: True
04-05-2025 14:49:35 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT DISTINCT "transaction_class"
            FROM transactions
            WHERE user_id = %s AND "transaction_class" IS NOT NULL
            ORDER BY "transaction_class"
         —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º user_id=198451926
04-05-2025 14:49:35 - database - INFO - –ü–æ–ª—É—á–µ–Ω–æ 1 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ transaction_class
04-05-2025 14:49:35 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 14:49:45 - root - INFO - –ü–æ–ª—É—á–µ–Ω callback: set_start_date
04-05-2025 14:49:50 - root - INFO - –ü–æ–ª—É—á–µ–Ω callback: set_end_date
04-05-2025 14:49:52 - root - INFO - –ü–æ–ª—É—á–µ–Ω callback: set_category
04-05-2025 15:40:54 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 15:40:55 - telegram.ext.Application - INFO - Application started
04-05-2025 15:42:10 - root - INFO - –í—ã–∑–æ–≤ set_start_date –¥–ª—è user_id=198451926
04-05-2025 15:42:13 - root - INFO - –í—ã–∑–æ–≤ set_end_date –¥–ª—è user_id=198451926
04-05-2025 15:42:15 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_category –≤—ã–∑–≤–∞–Ω –¥–ª—è user_id=198451926
04-05-2025 15:42:15 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 15:42:15 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 15:42:15 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 15:42:15 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 15:42:15 - database - INFO - –í—ã–∑–æ–≤ get_unique_values –¥–ª—è column=category, user_id=198451926
04-05-2025 15:42:15 - database - INFO - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è fetchall: True
04-05-2025 15:42:15 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT DISTINCT "category"
            FROM transactions
            WHERE user_id = %s AND "category" IS NOT NULL
            ORDER BY "category"
         —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º user_id=198451926
04-05-2025 15:42:15 - database - INFO - –ü–æ–ª—É—á–µ–Ω–æ 7 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ category
04-05-2025 15:42:15 - root - INFO - –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–í—Å–µ', 'AppStore | –ø–æ–¥–ø–∏—Å–∫–∏', '–ê–ø–ø–∞—Ä–∞—Ç—É—Ä–∞', '–î–µ—Ç–∏. –û–¥–µ–∂–¥–∞', '–ï–¥–∞', '–ö–∞—Ñ–µ, –ø–æ—Å–∏–¥–µ–ª–∫–∏', '–û–¥–µ–∂–¥–∞', '–°—Ç—Ä–∏–∂–∫–∞']
04-05-2025 15:42:15 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 15:43:12 - root - INFO - –í—ã–∑–æ–≤ set_start_date –¥–ª—è user_id=198451926
04-05-2025 15:43:33 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_category –≤—ã–∑–≤–∞–Ω –¥–ª—è user_id=198451926
04-05-2025 15:43:33 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 15:43:33 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 15:43:33 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 15:43:33 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 15:43:33 - database - INFO - –í—ã–∑–æ–≤ get_unique_values –¥–ª—è column=category, user_id=198451926
04-05-2025 15:43:33 - database - INFO - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è fetchall: True
04-05-2025 15:43:33 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT DISTINCT "category"
            FROM transactions
            WHERE user_id = %s AND "category" IS NOT NULL
            ORDER BY "category"
         —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º user_id=198451926
04-05-2025 15:43:33 - database - INFO - –ü–æ–ª—É—á–µ–Ω–æ 7 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ category
04-05-2025 15:43:33 - root - INFO - –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–í—Å–µ', 'AppStore | –ø–æ–¥–ø–∏—Å–∫–∏', '–ê–ø–ø–∞—Ä–∞—Ç—É—Ä–∞', '–î–µ—Ç–∏. –û–¥–µ–∂–¥–∞', '–ï–¥–∞', '–ö–∞—Ñ–µ, –ø–æ—Å–∏–¥–µ–ª–∫–∏', '–û–¥–µ–∂–¥–∞', '–°—Ç—Ä–∏–∂–∫–∞']
04-05-2025 15:43:33 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 15:44:19 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 15:44:19 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 15:44:19 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 15:44:19 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 15:44:19 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 15:44:19 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: SQL('\n            SELECT \n                id, transaction_date, amount, cash_source,\n                category, description, counterparty,\n                check_num, transaction_type,\n                transaction_class, target_amount, target_cash_source\n            FROM transactions \n            WHERE user_id = %s AND transaction_date BETWEEN %s AND %s\n            ') —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-04-04', '2025-05-04']
04-05-2025 15:44:19 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 10 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 15:44:19 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['ID', '–î–∞—Ç–∞', '–°—É–º–º–∞', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å', '–ö–∞—Ç–µ–≥–æ—Ä–∏—è', '–û–ø–∏—Å–∞–Ω–∏–µ', '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç', '–ß–µ–∫ #', '–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏', '–ö–ª–∞—Å—Å', '–°—É–º–º–∞ (–∫—É–¥–∞)', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å (–∫—É–¥–∞)']
04-05-2025 15:44:20 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 15:51:36 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ñ–∞–π–ª: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf
04-05-2025 15:51:37 - root - INFO - –ù–∞—á–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf, —Ä–∞–∑–º–µ—Ä: 87570 –±–∞–π—Ç
04-05-2025 15:51:37 - root - INFO - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: return_files=0
04-05-2025 15:51:37 - camelot - INFO - Processing page-1
04-05-2025 15:51:37 - camelot - INFO - Processing page-2
04-05-2025 15:51:37 - extract_transactions_pdf2 - INFO - –û–±—Ä–∞–±–æ—Ç–∫–∞ CSV –∫–∞–∫ Tinkoff_Platinum
04-05-2025 15:51:37 - extract_transactions_pdf2 - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω CSV –¥–ª—è Tinkoff Platinum, —Å—Ç—Ä–æ–∫: 28
04-05-2025 15:51:37 - extract_transactions_pdf2 - INFO - –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 15:52:23 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/tmpza19jf51.pdf
04-05-2025 15:52:23 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_Tinkoff_Platinum_temp.csv
04-05-2025 15:52:23 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 15:52:23 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/result.csv
04-05-2025 15:52:23 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/unclassified.csv
04-05-2025 15:53:05 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ñ–∞–π–ª: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf
04-05-2025 15:53:06 - root - INFO - –ù–∞—á–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf, —Ä–∞–∑–º–µ—Ä: 87570 –±–∞–π—Ç
04-05-2025 15:53:06 - root - INFO - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: return_files=0
04-05-2025 15:53:06 - camelot - INFO - Processing page-1
04-05-2025 15:53:06 - camelot - INFO - Processing page-2
04-05-2025 15:53:06 - extract_transactions_pdf2 - INFO - –û–±—Ä–∞–±–æ—Ç–∫–∞ CSV –∫–∞–∫ Tinkoff_Platinum
04-05-2025 15:53:06 - extract_transactions_pdf2 - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω CSV –¥–ª—è Tinkoff Platinum, —Å—Ç—Ä–æ–∫: 28
04-05-2025 15:53:06 - extract_transactions_pdf2 - INFO - –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 15:53:56 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/tmpuyvkpf_l.pdf
04-05-2025 15:53:56 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_Tinkoff_Platinum_temp.csv
04-05-2025 15:53:56 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 15:53:56 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/result.csv
04-05-2025 16:04:19 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 16:04:20 - telegram.ext.Application - INFO - Application started
04-05-2025 16:04:32 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ñ–∞–π–ª: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf
04-05-2025 16:04:32 - root - INFO - –ù–∞—á–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf, —Ä–∞–∑–º–µ—Ä: 87570 –±–∞–π—Ç
04-05-2025 16:04:32 - root - INFO - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: return_files=0
04-05-2025 16:04:33 - camelot - INFO - Processing page-1
04-05-2025 16:04:33 - camelot - INFO - Processing page-2
04-05-2025 16:04:33 - extract_transactions_pdf2 - INFO - –û–±—Ä–∞–±–æ—Ç–∫–∞ CSV –∫–∞–∫ Tinkoff_Platinum
04-05-2025 16:04:33 - extract_transactions_pdf2 - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω CSV –¥–ª—è Tinkoff Platinum, —Å—Ç—Ä–æ–∫: 28
04-05-2025 16:04:33 - extract_transactions_pdf2 - INFO - –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 16:05:35 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/tmpaknhyiln.pdf
04-05-2025 16:05:35 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_Tinkoff_Platinum_temp.csv
04-05-2025 16:05:35 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 16:05:35 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/result.csv
04-05-2025 16:16:32 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 16:16:33 - telegram.ext.Application - INFO - Application started
04-05-2025 16:16:39 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ñ–∞–π–ª: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf
04-05-2025 16:16:39 - root - INFO - –ù–∞—á–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf, —Ä–∞–∑–º–µ—Ä: 87570 –±–∞–π—Ç
04-05-2025 16:16:39 - root - INFO - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: return_files=0
04-05-2025 16:16:40 - camelot - INFO - Processing page-1
04-05-2025 16:16:40 - camelot - INFO - Processing page-2
04-05-2025 16:16:40 - extract_transactions_pdf2 - INFO - –û–±—Ä–∞–±–æ—Ç–∫–∞ CSV –∫–∞–∫ Tinkoff_Platinum
04-05-2025 16:16:40 - extract_transactions_pdf2 - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω CSV –¥–ª—è Tinkoff Platinum, —Å—Ç—Ä–æ–∫: 28
04-05-2025 16:16:40 - extract_transactions_pdf2 - INFO - –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 16:17:03 - root - ERROR - –û—à–∏–±–∫–∞: "None of [Index(['–¥–∞—Ç–∞'], dtype='object')] are in the [columns]", update: Update(callback_query=CallbackQuery(chat_instance='7314396038372118458', data='save_yes', from_user=User(first_name='Igor', id=198451926, is_bot=False, language_code='ru', last_name='Shvyrkin', username='INShvyrkin'), id='852344532680175487', message=Message(channel_chat_created=False, chat=Chat(first_name='Igor', id=198451926, last_name='Shvyrkin', type=<ChatType.PRIVATE>, username='INShvyrkin'), date=datetime.datetime(2025, 5, 4, 13, 16, 40, tzinfo=<UTC>), delete_chat_photo=False, from_user=User(first_name='INS –ê–Ω–∞–ª–∏–∑ –≤—ã–ø–∏—Å–æ–∫ PDF', id=7444624327, is_bot=True, username='INS_ExtrClassTrans_bot'), group_chat_created=False, message_id=1132, reply_markup=InlineKeyboardMarkup(inline_keyboard=((InlineKeyboardButton(callback_data='save_yes', text='–î–∞ ‚úÖ'), InlineKeyboardButton(callback_data='save_no', text='–ù–µ—Ç ‚ùå')),)), supergroup_chat_created=False, text='–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö?')), update_id=341837013)
Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_application.py", line 1124, in process_update
    await coroutine
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_handler.py", line 141, in handle_update
    return await self.callback(update, context)
  File "/app/bot.py", line 102, in wrapper
    return await func(*args, **kwargs)
  File "/app/bot.py", line 1509, in handle_save_confirmation
    logger.info("–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î: %s", pending_data['df'][['–¥–∞—Ç–∞']].head().to_dict())
  File "/root/.local/lib/python3.10/site-packages/pandas/core/frame.py", line 3767, in __getitem__
    indexer = self.columns._get_indexer_strict(key, "columns")[1]
  File "/root/.local/lib/python3.10/site-packages/pandas/core/indexes/base.py", line 5877, in _get_indexer_strict
    self._raise_if_missing(keyarr, indexer, axis_name)
  File "/root/.local/lib/python3.10/site-packages/pandas/core/indexes/base.py", line 5938, in _raise_if_missing
    raise KeyError(f"None of [{key}] are in the [{axis_name}]")
KeyError: "None of [Index(['–¥–∞—Ç–∞'], dtype='object')] are in the [columns]"
04-05-2025 16:17:03 - root - ERROR - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞:
Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_application.py", line 1124, in process_update
    await coroutine
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_handler.py", line 141, in handle_update
    return await self.callback(update, context)
  File "/app/bot.py", line 102, in wrapper
    return await func(*args, **kwargs)
  File "/app/bot.py", line 1509, in handle_save_confirmation
    logger.info("–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î: %s", pending_data['df'][['–¥–∞—Ç–∞']].head().to_dict())
  File "/root/.local/lib/python3.10/site-packages/pandas/core/frame.py", line 3767, in __getitem__
    indexer = self.columns._get_indexer_strict(key, "columns")[1]
  File "/root/.local/lib/python3.10/site-packages/pandas/core/indexes/base.py", line 5877, in _get_indexer_strict
    self._raise_if_missing(keyarr, indexer, axis_name)
  File "/root/.local/lib/python3.10/site-packages/pandas/core/indexes/base.py", line 5938, in _raise_if_missing
    raise KeyError(f"None of [{key}] are in the [{axis_name}]")
KeyError: "None of [Index(['–¥–∞—Ç–∞'], dtype='object')] are in the [columns]"
04-05-2025 16:22:38 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 16:22:39 - telegram.ext.Application - INFO - Application started
04-05-2025 16:23:23 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ñ–∞–π–ª: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf
04-05-2025 16:23:23 - root - INFO - –ù–∞—á–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf, —Ä–∞–∑–º–µ—Ä: 87570 –±–∞–π—Ç
04-05-2025 16:23:23 - root - INFO - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: return_files=0
04-05-2025 16:23:24 - camelot - INFO - Processing page-1
04-05-2025 16:23:24 - camelot - INFO - Processing page-2
04-05-2025 16:23:24 - extract_transactions_pdf2 - INFO - –û–±—Ä–∞–±–æ—Ç–∫–∞ CSV –∫–∞–∫ Tinkoff_Platinum
04-05-2025 16:23:24 - extract_transactions_pdf2 - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω CSV –¥–ª—è Tinkoff Platinum, —Å—Ç—Ä–æ–∫: 28
04-05-2025 16:23:24 - extract_transactions_pdf2 - INFO - –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 16:23:38 - root - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î: {'–î–∞—Ç–∞': {0: '03.05.2025 17:25', 1: '03.05.2025 13:53', 2: '03.05.2025 12:42', 3: '03.05.2025 11:59', 4: '03.05.2025 10:58'}}
04-05-2025 16:23:38 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 16:23:38 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 16:23:38 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 16:23:38 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 16:23:38 - database - WARNING - DataFrame –ø—É—Å—Ç –ø–æ—Å–ª–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞—Ç –∏ —Å—É–º–º
04-05-2025 16:23:38 - root - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: –Ω–æ–≤—ã—Ö - 0, –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ - 0
04-05-2025 16:23:39 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 16:23:39 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/tmpu4tk68vb.pdf
04-05-2025 16:23:39 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_Tinkoff_Platinum_temp.csv
04-05-2025 16:23:39 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 16:23:39 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/result.csv
04-05-2025 16:33:47 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ñ–∞–π–ª: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf
04-05-2025 16:33:48 - root - INFO - –ù–∞—á–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf, —Ä–∞–∑–º–µ—Ä: 87570 –±–∞–π—Ç
04-05-2025 16:33:48 - root - INFO - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: return_files=0
04-05-2025 16:33:48 - camelot - INFO - Processing page-1
04-05-2025 16:33:48 - camelot - INFO - Processing page-2
04-05-2025 16:33:48 - extract_transactions_pdf2 - INFO - –û–±—Ä–∞–±–æ—Ç–∫–∞ CSV –∫–∞–∫ Tinkoff_Platinum
04-05-2025 16:33:48 - extract_transactions_pdf2 - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω CSV –¥–ª—è Tinkoff Platinum, —Å—Ç—Ä–æ–∫: 28
04-05-2025 16:33:48 - extract_transactions_pdf2 - INFO - –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 16:33:52 - root - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î: {'–î–∞—Ç–∞': {0: '03.05.2025 17:25', 1: '03.05.2025 13:53', 2: '03.05.2025 12:42', 3: '03.05.2025 11:59', 4: '03.05.2025 10:58'}}
04-05-2025 16:33:52 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 16:33:52 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 16:33:52 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 16:33:52 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 16:33:52 - database - WARNING - DataFrame –ø—É—Å—Ç –ø–æ—Å–ª–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞—Ç –∏ —Å—É–º–º
04-05-2025 16:33:52 - root - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: –Ω–æ–≤—ã—Ö - 0, –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ - 0
04-05-2025 16:33:52 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 16:33:52 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/tmpf4lzqom0.pdf
04-05-2025 16:33:52 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_Tinkoff_Platinum_temp.csv
04-05-2025 16:33:52 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 16:33:52 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/result.csv
04-05-2025 16:33:54 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 16:33:54 - telegram.ext.Application - INFO - Application started
04-05-2025 16:36:18 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ñ–∞–π–ª: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf
04-05-2025 16:36:18 - root - INFO - –ù–∞—á–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF: –°–ø—Ä–∞–≤–∫–∞_–æ_–¥–≤–∏–∂–µ–Ω–∏–∏_–¥–µ–Ω–µ–∂–Ω—ã—Ö_—Å—Ä–µ–¥—Å—Ç–≤.pdf, —Ä–∞–∑–º–µ—Ä: 87570 –±–∞–π—Ç
04-05-2025 16:36:18 - root - INFO - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: return_files=0
04-05-2025 16:36:19 - camelot - INFO - Processing page-1
04-05-2025 16:36:19 - camelot - INFO - Processing page-2
04-05-2025 16:36:19 - extract_transactions_pdf2 - INFO - –û–±—Ä–∞–±–æ—Ç–∫–∞ CSV –∫–∞–∫ Tinkoff_Platinum
04-05-2025 16:36:19 - extract_transactions_pdf2 - INFO - –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω CSV –¥–ª—è Tinkoff Platinum, —Å—Ç—Ä–æ–∫: 28
04-05-2025 16:36:19 - extract_transactions_pdf2 - INFO - –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 16:36:33 - root - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î: {'–î–∞—Ç–∞': {0: '03.05.2025 17:25', 1: '03.05.2025 13:53', 2: '03.05.2025 12:42', 3: '03.05.2025 11:59', 4: '03.05.2025 10:58'}}
04-05-2025 16:36:33 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 16:36:33 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 16:36:33 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 16:36:33 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 16:36:33 - database - INFO - –í—Å—Ç–∞–≤–ª–µ–Ω–æ 12 –Ω–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
04-05-2025 16:36:33 - root - INFO - –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: –Ω–æ–≤—ã—Ö - 12, –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ - 0
04-05-2025 16:36:33 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 16:36:33 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/tmpnqxuk9cz.pdf
04-05-2025 16:36:33 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_Tinkoff_Platinum_temp.csv
04-05-2025 16:36:33 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/transactions_processed_tinkoff_platinum.csv
04-05-2025 16:36:33 - root - INFO - –£–¥–∞–ª–µ–Ω –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª: /tmp/result.csv
04-05-2025 16:43:48 - root - INFO - –í—ã–∑–æ–≤ set_start_date –¥–ª—è user_id=198451926
04-05-2025 16:44:00 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-03, user_data: {'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_start_date': True}
04-05-2025 16:44:00 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞: 2025-05-03
04-05-2025 16:44:08 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-05-03', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 16:44:08 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 16:44:08 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 16:44:08 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 16:44:08 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 16:44:08 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: SQL('\n            SELECT \n                id, transaction_date, amount, cash_source,\n                category, description, counterparty,\n                check_num, transaction_type,\n                transaction_class, target_amount, target_cash_source\n            FROM transactions \n            WHERE user_id = %s AND transaction_date BETWEEN %s AND %s\n            ') —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-05-03', '2025-05-04']
04-05-2025 16:44:08 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 5 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 16:44:08 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['ID', '–î–∞—Ç–∞', '–°—É–º–º–∞', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å', '–ö–∞—Ç–µ–≥–æ—Ä–∏—è', '–û–ø–∏—Å–∞–Ω–∏–µ', '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç', '–ß–µ–∫ #', '–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏', '–ö–ª–∞—Å—Å', '–°—É–º–º–∞ (–∫—É–¥–∞)', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å (–∫—É–¥–∞)']
04-05-2025 16:44:09 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 16:45:59 - root - INFO - –í—ã–∑–æ–≤ set_start_date –¥–ª—è user_id=198451926
04-05-2025 16:46:15 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-02, user_data: {'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_start_date': True}
04-05-2025 16:46:15 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞: 2025-05-02
04-05-2025 16:46:17 - root - INFO - –í—ã–∑–æ–≤ set_end_date –¥–ª—è user_id=198451926
04-05-2025 16:46:26 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-03, user_data: {'export_filters': {'start_date': '2025-05-02', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_end_date': True}
04-05-2025 16:46:26 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: 2025-05-03
04-05-2025 16:46:37 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-05-02', 'end_date': '2025-05-03', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 16:46:37 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 16:46:37 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 16:46:37 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 16:46:37 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 16:46:37 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: SQL('\n            SELECT \n                id, transaction_date, amount, cash_source,\n                category, description, counterparty,\n                check_num, transaction_type,\n                transaction_class, target_amount, target_cash_source\n            FROM transactions \n            WHERE user_id = %s AND transaction_date BETWEEN %s AND %s\n            ') —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-05-02', '2025-05-03']
04-05-2025 16:46:37 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 7 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 16:46:37 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['ID', '–î–∞—Ç–∞', '–°—É–º–º–∞', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å', '–ö–∞—Ç–µ–≥–æ—Ä–∏—è', '–û–ø–∏—Å–∞–Ω–∏–µ', '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç', '–ß–µ–∫ #', '–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏', '–ö–ª–∞—Å—Å', '–°—É–º–º–∞ (–∫—É–¥–∞)', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å (–∫—É–¥–∞)']
04-05-2025 16:46:37 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 16:47:27 - root - INFO - –í—ã–∑–æ–≤ set_end_date –¥–ª—è user_id=198451926
04-05-2025 16:47:34 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-04, user_data: {'awaiting_end_date': True}
04-05-2025 16:47:34 - root - ERROR - –û—à–∏–±–∫–∞: 'export_filters', update: Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Igor', id=198451926, last_name='Shvyrkin', type=<ChatType.PRIVATE>, username='INShvyrkin'), date=datetime.datetime(2025, 5, 4, 13, 47, 34, tzinfo=<UTC>), delete_chat_photo=False, from_user=User(first_name='Igor', id=198451926, is_bot=False, language_code='ru', last_name='Shvyrkin', username='INShvyrkin'), group_chat_created=False, message_id=1161, supergroup_chat_created=False, text='2025-05-04'), update_id=341837032)
Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_application.py", line 1124, in process_update
    await coroutine
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_handler.py", line 141, in handle_update
    return await self.callback(update, context)
  File "/app/bot.py", line 102, in wrapper
    return await func(*args, **kwargs)
  File "/app/bot.py", line 546, in handle_text_input
    user_data['export_filters']['end_date'] = text
KeyError: 'export_filters'
04-05-2025 16:47:34 - root - ERROR - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞:
Traceback (most recent call last):
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_application.py", line 1124, in process_update
    await coroutine
  File "/root/.local/lib/python3.10/site-packages/telegram/ext/_handler.py", line 141, in handle_update
    return await self.callback(update, context)
  File "/app/bot.py", line 102, in wrapper
    return await func(*args, **kwargs)
  File "/app/bot.py", line 546, in handle_text_input
    user_data['export_filters']['end_date'] = text
KeyError: 'export_filters'
04-05-2025 16:47:50 - root - INFO - –í—ã–∑–æ–≤ set_end_date –¥–ª—è user_id=198451926
04-05-2025 16:47:58 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-04, user_data: {'awaiting_end_date': True, 'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}}
04-05-2025 16:47:58 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: 2025-05-04
04-05-2025 16:48:01 - root - INFO - –í—ã–∑–æ–≤ set_start_date –¥–ª—è user_id=198451926
04-05-2025 16:48:07 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-02, user_data: {'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_start_date': True}
04-05-2025 16:48:07 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞: 2025-05-02
04-05-2025 16:48:15 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-05-02', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 16:48:15 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 16:48:15 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 16:48:15 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 16:48:15 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 16:48:15 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: SQL('\n            SELECT \n                id, transaction_date, amount, cash_source,\n                category, description, counterparty,\n                check_num, transaction_type,\n                transaction_class, target_amount, target_cash_source\n            FROM transactions \n            WHERE user_id = %s AND transaction_date BETWEEN %s AND %s\n            ') —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-05-02', '2025-05-04']
04-05-2025 16:48:15 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 12 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 16:48:15 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['ID', '–î–∞—Ç–∞', '–°—É–º–º–∞', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å', '–ö–∞—Ç–µ–≥–æ—Ä–∏—è', '–û–ø–∏—Å–∞–Ω–∏–µ', '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç', '–ß–µ–∫ #', '–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏', '–ö–ª–∞—Å—Å', '–°—É–º–º–∞ (–∫—É–¥–∞)', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å (–∫—É–¥–∞)']
04-05-2025 16:48:16 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 19:48:28 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 19:48:29 - telegram.ext.Application - INFO - Application started
04-05-2025 19:48:58 - root - INFO - –í—ã–∑–æ–≤ set_end_date –¥–ª—è user_id=198451926
04-05-2025 19:49:10 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-03, user_data: {'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_end_date': True}
04-05-2025 19:49:10 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: 2025-05-03
04-05-2025 19:49:13 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-04-04', 'end_date': '2025-05-03', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 19:49:13 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 19:49:13 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 19:49:13 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 19:49:13 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 19:49:13 - database - INFO - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: >= 2025-04-04 –∏ < 2025-05-04
04-05-2025 19:49:13 - root - ERROR - –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞: sequence item 0: expected str instance, SQL found
Traceback (most recent call last):
  File "/app/bot.py", line 613, in generate_report
    df = db.get_transactions(
  File "/app/database.py", line 315, in get_transactions
    query = sql.SQL("".join(query_parts))
TypeError: sequence item 0: expected str instance, SQL found
04-05-2025 19:49:13 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 19:56:07 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 19:56:08 - telegram.ext.Application - INFO - Application started
04-05-2025 20:05:26 - root - INFO - –í—ã–∑–æ–≤ set_end_date –¥–ª—è user_id=198451926
04-05-2025 20:05:40 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-03, user_data: {'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_end_date': True}
04-05-2025 20:05:40 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: 2025-05-03
04-05-2025 20:05:43 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-04-04', 'end_date': '2025-05-03', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 20:05:43 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 20:05:43 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 20:05:43 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 20:05:43 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 20:05:43 - database - INFO - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: >= 2025-04-04 –∏ < 2025-05-04
04-05-2025 20:05:43 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: Composed([SQL('\n            SELECT\n                id, transaction_date, amount, cash_source,\n                category, description, counterparty,\n                check_num, transaction_type,\n                transaction_class, target_amount, target_cash_source\n            FROM transactions\n            WHERE user_id = %s AND transaction_date >= %s AND transaction_date < %s\n            ')]) —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-04-04', datetime.date(2025, 5, 4)]
04-05-2025 20:05:43 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 22 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 20:05:43 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['ID', '–î–∞—Ç–∞', '–°—É–º–º–∞', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å', '–ö–∞—Ç–µ–≥–æ—Ä–∏—è', '–û–ø–∏—Å–∞–Ω–∏–µ', '–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç', '–ß–µ–∫ #', '–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏', '–ö–ª–∞—Å—Å', '–°—É–º–º–∞ (–∫—É–¥–∞)', '–ù–∞–ª–∏—á–Ω–æ—Å—Ç—å (–∫—É–¥–∞)']
04-05-2025 20:05:43 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 20:22:55 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 20:22:56 - telegram.ext.Application - INFO - Application started
04-05-2025 20:29:01 - root - INFO - –í—ã–∑–æ–≤ set_end_date –¥–ª—è user_id=198451926
04-05-2025 20:29:08 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-03, user_data: {'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_end_date': True}
04-05-2025 20:29:08 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: 2025-05-03
04-05-2025 20:29:11 - root - INFO - –í—ã–∑–æ–≤ set_start_date –¥–ª—è user_id=198451926
04-05-2025 20:29:16 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-02, user_data: {'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-03', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_start_date': True}
04-05-2025 20:29:16 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞: 2025-05-02
04-05-2025 20:29:22 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-05-02', 'end_date': '2025-05-03', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 20:29:22 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 20:29:22 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 20:29:22 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 20:29:22 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 20:29:22 - database - INFO - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: >= 2025-05-02 –∏ < 2025-05-04
04-05-2025 20:29:22 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: Composed([SQL('\n            SELECT\n                id, transaction_date, amount, cash_source,\n                category, description, counterparty,\n                check_num, transaction_type,\n                transaction_class, target_amount, target_cash_source\n            FROM transactions\n            WHERE user_id = %s AND transaction_date >= %s AND transaction_date < %s\n            ')]) —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-05-02', datetime.date(2025, 5, 4)]
04-05-2025 20:29:22 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 12 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 20:29:22 - root - INFO - –ó–Ω–∞—á–µ–Ω–∏—è NaN (–∏ –¥—Ä—É–≥–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ) –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏.
04-05-2025 20:29:22 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['id', 'transaction_date', 'amount', 'cash_source', 'category', 'description', 'counterparty', 'check_num', 'transaction_type', 'transaction_class', 'target_amount', 'target_cash_source']
04-05-2025 20:29:22 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 21:40:04 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 21:40:04 - telegram.ext.Application - INFO - Application started
04-05-2025 21:46:02 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 21:46:02 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 21:46:02 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 21:46:02 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 21:46:02 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 21:46:02 - database - INFO - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: >= 2025-04-04 –∏ < 2025-05-05
04-05-2025 21:46:02 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: Composed([SQL('\n            SELECT\n                id, transaction_date, amount, cash_source,\n                category, description, counterparty,\n                check_num, transaction_type,\n                transaction_class, target_amount, target_cash_source\n            FROM transactions\n            WHERE user_id = %s AND transaction_date >= %s AND transaction_date < %s\n            ')]) —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-04-04', datetime.date(2025, 5, 5)]
04-05-2025 21:46:02 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 22 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 21:46:02 - root - INFO - –ó–Ω–∞—á–µ–Ω–∏—è NaN (–∏ –¥—Ä—É–≥–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ) –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏.
04-05-2025 21:46:02 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['id', 'transaction_date', 'amount', 'cash_source', 'category', 'description', 'counterparty', 'check_num', 'transaction_type', 'transaction_class', 'target_amount', 'target_cash_source']
04-05-2025 21:46:02 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 21:54:44 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 21:54:45 - telegram.ext.Application - INFO - Application started
04-05-2025 21:54:57 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 21:54:57 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 21:54:57 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 21:54:57 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 21:54:57 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 21:54:57 - database - INFO - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: >= 2025-04-04 –∏ < 2025-05-05
04-05-2025 21:54:57 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT
                id, transaction_date, amount, cash_source,
                category, description, counterparty,
                check_num, transaction_type,
                transaction_class, target_amount, target_cash_source
            FROM transactions
            WHERE user_id = %s AND transaction_date >= %s AND transaction_date < %s
             —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-04-04', datetime.date(2025, 5, 5)]
04-05-2025 21:54:57 - database - ERROR - –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ë–î: name 'query' is not defined
Traceback (most recent call last):
  File "/app/database.py", line 61, in get_cursor
    yield cursor
  File "/app/database.py", line 322, in get_transactions
    cur.execute(query, params)
NameError: name 'query' is not defined
04-05-2025 21:54:57 - database - ERROR - –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞: name 'query' is not defined
04-05-2025 21:54:57 - root - ERROR - –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞: name 'query' is not defined
Traceback (most recent call last):
  File "/app/bot.py", line 613, in generate_report
    df = db.get_transactions(
  File "/app/database.py", line 322, in get_transactions
    cur.execute(query, params)
NameError: name 'query' is not defined
04-05-2025 21:54:57 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 21:56:04 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 21:56:04 - telegram.ext.Application - INFO - Application started
04-05-2025 21:56:14 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 21:56:14 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 21:56:14 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 21:56:14 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 21:56:14 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 21:56:14 - database - INFO - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: >= 2025-04-04 –∏ < 2025-05-05
04-05-2025 21:56:14 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT
                id, transaction_date, amount, cash_source,
                category, description, counterparty,
                check_num, transaction_type,
                transaction_class, target_amount, target_cash_source
            FROM transactions
            WHERE user_id = %s AND transaction_date >= %s AND transaction_date < %s
             —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-04-04', datetime.date(2025, 5, 5)]
04-05-2025 21:56:14 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 22 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 21:56:14 - root - INFO - –ó–Ω–∞—á–µ–Ω–∏—è NaN (–∏ –¥—Ä—É–≥–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ) –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏.
04-05-2025 21:56:14 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['id', 'transaction_date', 'amount', 'cash_source', 'category', 'description', 'counterparty', 'check_num', 'transaction_type', 'transaction_class', 'target_amount', 'target_cash_source']
04-05-2025 21:56:15 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 22:02:00 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 22:02:01 - telegram.ext.Application - INFO - Application started
04-05-2025 22:02:11 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 22:02:11 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 22:02:11 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 22:02:11 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 22:02:11 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 22:02:11 - database - INFO - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: >= 2025-04-04 –∏ < 2025-05-05
04-05-2025 22:02:11 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT
                id, transaction_date, amount, cash_source,
                category, description, counterparty,
                check_num, transaction_type,
                transaction_class, target_amount, target_cash_source
            FROM transactions
            WHERE user_id = %s AND transaction_date >= %s AND transaction_date < %s
             ORDER BY transaction_date DESC —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-04-04', datetime.date(2025, 5, 5)]
04-05-2025 22:02:11 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 22 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 22:02:11 - root - INFO - –ó–Ω–∞—á–µ–Ω–∏—è NaN (–∏ –¥—Ä—É–≥–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ) –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏.
04-05-2025 22:02:11 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['id', 'transaction_date', 'amount', 'cash_source', 'category', 'description', 'counterparty', 'check_num', 'transaction_type', 'transaction_class', 'target_amount', 'target_cash_source']
04-05-2025 22:02:11 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 22:02:46 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_cash_source –≤—ã–∑–≤–∞–Ω
04-05-2025 22:02:46 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 22:02:46 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 22:02:46 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 22:02:46 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 22:02:46 - database - INFO - –í—ã–∑–æ–≤ get_unique_values –¥–ª—è column=cash_source, user_id=198451926
04-05-2025 22:02:46 - database - INFO - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è fetchall: True
04-05-2025 22:02:46 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT DISTINCT "cash_source"
            FROM transactions
            WHERE user_id = %s AND "cash_source" IS NOT NULL
            ORDER BY "cash_source"
         —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º user_id=198451926
04-05-2025 22:02:46 - database - INFO - –ü–æ–ª—É—á–µ–Ω–æ 1 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ cash_source
04-05-2025 22:02:46 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 22:02:52 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_category –≤—ã–∑–≤–∞–Ω –¥–ª—è user_id=198451926
04-05-2025 22:02:52 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 22:02:52 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 22:02:52 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 22:02:52 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 22:02:52 - database - INFO - –í—ã–∑–æ–≤ get_unique_values –¥–ª—è column=category, user_id=198451926
04-05-2025 22:02:52 - database - INFO - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è fetchall: True
04-05-2025 22:02:52 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT DISTINCT "category"
            FROM transactions
            WHERE user_id = %s AND "category" IS NOT NULL
            ORDER BY "category"
         —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º user_id=198451926
04-05-2025 22:02:52 - database - INFO - –ü–æ–ª—É—á–µ–Ω–æ 8 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ category
04-05-2025 22:02:52 - root - INFO - –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–í—Å–µ', 'AppStore | –ø–æ–¥–ø–∏—Å–∫–∏', '–ê–ø–ø–∞—Ä–∞—Ç—É—Ä–∞', '–î–µ—Ç–∏. –û–¥–µ–∂–¥–∞', '–ï–¥–∞', '–ö–∞—Ñ–µ, –ø–æ—Å–∏–¥–µ–ª–∫–∏', '–û–¥–µ–∂–¥–∞', '–ü—Ä–∞–∑–¥–Ω–∏–∫–∏, –ü–æ–¥–∞—Ä–∫–∏', '–°—Ç—Ä–∏–∂–∫–∞']
04-05-2025 22:02:52 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 22:02:54 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 22:02:54 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 22:02:54 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 22:02:54 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 22:02:54 - database - INFO - –í—ã–∑–æ–≤ get_unique_values –¥–ª—è column=category, user_id=198451926
04-05-2025 22:02:54 - database - INFO - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è fetchall: True
04-05-2025 22:02:54 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT DISTINCT "category"
            FROM transactions
            WHERE user_id = %s AND "category" IS NOT NULL
            ORDER BY "category"
         —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º user_id=198451926
04-05-2025 22:02:54 - database - INFO - –ü–æ–ª—É—á–µ–Ω–æ 8 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ category
04-05-2025 22:02:54 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 22:02:56 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–ê–ø–ø–∞—Ä–∞—Ç—É—Ä–∞', 'transaction_type': '–í—Å–µ', 'cash_source': '–¢–∏–Ω—å–∫–æ—Ñ—Ñ. –ü–ª–∞—Ç–∏–Ω—É–º', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 22:02:56 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 22:02:56 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 22:02:56 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 22:02:56 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 22:02:56 - database - INFO - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: >= 2025-04-04 –∏ < 2025-05-05
04-05-2025 22:02:56 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT
                id, transaction_date, amount, cash_source,
                category, description, counterparty,
                check_num, transaction_type,
                transaction_class, target_amount, target_cash_source
            FROM transactions
            WHERE user_id = %s AND transaction_date >= %s AND transaction_date < %s
             AND "category" = %s AND "cash_source" = %s ORDER BY transaction_date DESC —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-04-04', datetime.date(2025, 5, 5), '–ê–ø–ø–∞—Ä–∞—Ç—É—Ä–∞', '–¢–∏–Ω—å–∫–æ—Ñ—Ñ. –ü–ª–∞—Ç–∏–Ω—É–º']
04-05-2025 22:02:56 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 1 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 22:02:56 - root - INFO - –ó–Ω–∞—á–µ–Ω–∏—è NaN (–∏ –¥—Ä—É–≥–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ) –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏.
04-05-2025 22:02:56 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['id', 'transaction_date', 'amount', 'cash_source', 'category', 'description', 'counterparty', 'check_num', 'transaction_type', 'transaction_class', 'target_amount', 'target_cash_source']
04-05-2025 22:02:57 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 22:27:15 - root - INFO - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
04-05-2025 22:27:15 - telegram.ext.Application - INFO - Application started
04-05-2025 22:28:21 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 22:28:21 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 22:28:21 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 22:28:21 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 22:28:21 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 22:28:21 - database - INFO - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: >= 2025-04-04 –∏ < 2025-05-05
04-05-2025 22:28:21 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT
                id, transaction_date, amount, cash_source,
                category, description, counterparty,
                check_num, transaction_type,
                transaction_class, target_amount, target_cash_source
            FROM transactions
            WHERE user_id = %s AND transaction_date >= %s AND transaction_date < %s
             ORDER BY transaction_date DESC —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-04-04', datetime.date(2025, 5, 5)]
04-05-2025 22:28:21 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 22 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 22:28:21 - root - INFO - –ó–Ω–∞—á–µ–Ω–∏—è NaN (–∏ –¥—Ä—É–≥–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ) –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏.
04-05-2025 22:28:21 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['id', 'transaction_date', 'amount', 'cash_source', 'category', 'description', 'counterparty', 'check_num', 'transaction_type', 'transaction_class', 'target_amount', 'target_cash_source']
04-05-2025 22:28:22 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 22:28:38 - root - INFO - –í—ã–∑–æ–≤ set_start_date –¥–ª—è user_id=198451926
04-05-2025 22:28:48 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-02, user_data: {'export_filters': {'start_date': '2025-04-04', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_start_date': True}
04-05-2025 22:28:48 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞: 2025-05-02
04-05-2025 22:28:58 - root - INFO - –í—ã–∑–æ–≤ set_end_date –¥–ª—è user_id=198451926
04-05-2025 22:29:01 - root - INFO - –ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç: 2025-05-02, user_data: {'export_filters': {'start_date': '2025-05-02', 'end_date': '2025-05-04', 'category': '–í—Å–µ', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}, 'awaiting_end_date': True}
04-05-2025 22:29:01 - root - INFO - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: 2025-05-02
04-05-2025 22:29:18 - root - INFO - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ set_category –≤—ã–∑–≤–∞–Ω –¥–ª—è user_id=198451926
04-05-2025 22:29:19 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 22:29:19 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 22:29:19 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 22:29:19 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 22:29:19 - database - INFO - –í—ã–∑–æ–≤ get_unique_values –¥–ª—è column=category, user_id=198451926
04-05-2025 22:29:19 - database - INFO - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è fetchall: True
04-05-2025 22:29:19 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT DISTINCT "category"
            FROM transactions
            WHERE user_id = %s AND "category" IS NOT NULL
            ORDER BY "category"
         —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º user_id=198451926
04-05-2025 22:29:19 - database - INFO - –ü–æ–ª—É—á–µ–Ω–æ 8 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ category
04-05-2025 22:29:19 - root - INFO - –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ['–í—Å–µ', 'AppStore | –ø–æ–¥–ø–∏—Å–∫–∏', '–ê–ø–ø–∞—Ä–∞—Ç—É—Ä–∞', '–î–µ—Ç–∏. –û–¥–µ–∂–¥–∞', '–ï–¥–∞', '–ö–∞—Ñ–µ, –ø–æ—Å–∏–¥–µ–ª–∫–∏', '–û–¥–µ–∂–¥–∞', '–ü—Ä–∞–∑–¥–Ω–∏–∫–∏, –ü–æ–¥–∞—Ä–∫–∏', '–°—Ç—Ä–∏–∂–∫–∞']
04-05-2025 22:29:19 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 22:29:26 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 22:29:26 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 22:29:26 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 22:29:26 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 22:29:26 - database - INFO - –í—ã–∑–æ–≤ get_unique_values –¥–ª—è column=category, user_id=198451926
04-05-2025 22:29:26 - database - INFO - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è fetchall: True
04-05-2025 22:29:26 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT DISTINCT "category"
            FROM transactions
            WHERE user_id = %s AND "category" IS NOT NULL
            ORDER BY "category"
         —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º user_id=198451926
04-05-2025 22:29:26 - database - INFO - –ü–æ–ª—É—á–µ–Ω–æ 8 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ category
04-05-2025 22:29:26 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
04-05-2025 22:29:28 - root - INFO - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏: {'start_date': '2025-05-02', 'end_date': '2025-05-02', 'category': '–ï–¥–∞', 'transaction_type': '–í—Å–µ', 'cash_source': '–í—Å–µ', 'counterparty': '–í—Å–µ', 'check_num': '–í—Å–µ', 'transaction_class': '–í—Å–µ'}
04-05-2025 22:29:28 - database - INFO - –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î: host=host.docker.internal, dbname=finance_bot
04-05-2025 22:29:28 - database - INFO - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ
04-05-2025 22:29:28 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/tables.sql
04-05-2025 22:29:28 - database - INFO - –í—ã–ø–æ–ª–Ω–µ–Ω SQL-—Å–∫—Ä–∏–ø—Ç: /app/sql/indexes.sql
04-05-2025 22:29:28 - database - INFO - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: >= 2025-05-02 –∏ < 2025-05-03
04-05-2025 22:29:28 - database - INFO - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å: 
            SELECT
                id, transaction_date, amount, cash_source,
                category, description, counterparty,
                check_num, transaction_type,
                transaction_class, target_amount, target_cash_source
            FROM transactions
            WHERE user_id = %s AND transaction_date >= %s AND transaction_date < %s
             AND "category" = %s ORDER BY transaction_date DESC —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ [198451926, '2025-05-02', datetime.date(2025, 5, 3), '–ï–¥–∞']
04-05-2025 22:29:28 - root - INFO - –ü–æ–ª—É—á–µ–Ω–æ 4 –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
04-05-2025 22:29:28 - root - INFO - –ó–Ω–∞—á–µ–Ω–∏—è NaN (–∏ –¥—Ä—É–≥–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ) –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏.
04-05-2025 22:29:28 - root - INFO - –°—Ç–æ–ª–±—Ü—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: ['id', 'transaction_date', 'amount', 'cash_source', 'category', 'description', 'counterparty', 'check_num', 'transaction_type', 'transaction_class', 'target_amount', 'target_cash_source']
04-05-2025 22:29:28 - database - INFO - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î –∑–∞–∫—Ä—ã—Ç–æ
